!function(){var e=document.createElement("style");e.innerHTML='.home>div{height:calc(100vh - 300px)}.home .home-scale-box-m{transform:scale(1.2) translateY(10%)}.home .home-scale-box-l{transform:scale(1.5) translateY(20%)}.home .hide-control>.ant-btn-link{color:var(--head-text-color);opacity:.5;padding-left:0;padding-right:0}.home-show-main{padding-bottom:10px}.home-show-main .ant-spin-dot-item{background-color:var(--primary-color)}.home-show-main .type-end{position:relative}.home-show-main .type-end:before{content:"Time Out !";text-align:center;padding-top:36px;font-size:20px;position:absolute;top:4px;left:5px;background-color:gray;color:var(--head-text-color);border-radius:4px;opacity:.8;height:110px;width:440px;z-index:9}.home-show-main-window{padding:0 8px 10px 12px;font-size:20px;background-color:var(--home-window-bg-color);color:var(--home-window-text-color);border-radius:4px;height:116px;overflow:hidden;user-select:none}.home-show-main-window-item{z-index:1}.home-show-main-window-item.correct{color:var(--success-color);opacity:var(--success-opacity)}.home-show-main-window-item.incorrect{color:var(--error-color);opacity:var(--error-opacity)}.home-show-main-window--label{font-size:20px;text-align:center;position:relative;top:10px;color:var(--home-window-text-sub-color)}.home-show-main-window--label.acting:before{content:"";position:absolute;left:-6%;top:0;width:112%;height:42px;background-color:var(--home-window-text-acting-bg-color);border-radius:4px;z-index:-1}.home-show-main-window--text{font-size:14px;text-align:center}.home-show-main-window--text.hide{opacity:0}.home-show-main-window--text.show-text{opacity:.7}.home-input{line-height:2;font-size:20px;border-radius:4px}.home-input:focus{box-shadow:0 0 0 6px var(--home-input-focus-color)}.home-input:hover,.home-input:focus{border-color:var(--primary-color)}.home-countdown{cursor:pointer}.home-countdown-main{background-color:var(--home-countdown-bg-color);border-radius:4px;text-align:center;padding:6px 0}.home-countdown-main .ant-statistic-content-value{color:var(--home-countdown-text-color);position:relative}.home-countdown-placeholder{position:absolute;top:2px;left:0;width:100%;height:45px;line-height:45px;text-align:center;font-size:24px;color:var(--home-countdown-text-color);background-color:var(--home-countdown-bg-color)}.home-countdown-placeholder.time-run{display:none}.home-reload-btn{height:50px;width:50px;border-radius:4px;background-color:var(--home-reload-btn-bg-color);border-color:var(--home-reload-btn-bg-color)}.home-reload-btn:hover,.home-reload-btn:focus{box-shadow:0 0 0 5px var(--home-reload-btn-focus-color);background-color:var(--home-reload-btn-bg-color);border-color:var(--home-reload-btn-bg-color);filter:brightness(1.1)}.home-reload-btn span{color:var(--home-reload-btn-text-color);font-size:26px;position:relative;top:2px}.home .home-type-result-container{position:relative}.home .home-type-result{position:absolute;left:0;top:20px;width:100%;color:var(--head-text-color)}.home .home-type-result .result-wpm{text-align:center;font-size:40px}.home .home-type-result .result-title{font-size:20px;padding-left:20px}.home .home-type-result .result-numbers{font-size:20px;padding-right:20px;text-align:right}.home .home-type-result .result-numbers.correct{color:var(--success-color)}.home .home-type-result .result-numbers.wrong{color:var(--error-color)}.home .home-type-result .type-resule-collapse .ant-collapse-header{color:var(--head-text-color)}.home .home-type-result .type-resule-collapse .ant-tag{text-align:center;margin-bottom:5px;line-height:14px}.home-countdown-popover .ant-input-number{width:70px;margin-right:10px}.home-countdown-popover .ant-input-number:focus,.home-countdown-popover .ant-input-number:hover{border-color:var(--primary-color)}\n',document.head.appendChild(e),System.register(["./vendor-legacy.5a6ebf9e.js","./index-legacy.dad73cd8.js","./wordTool-legacy.766aff15.js"],(function(e){"use strict";var o,r,t,n,c,s,l,i,a,d,u,h,p,m,x,w;return{setters:[function(e){o=e.r,r=e.j,t=e.R,n=e.e,c=e.C,s=e.B,l=e.v,i=e.o,a=e.P,d=e.w,u=e.x,h=e.y,p=e.z,m=e.D},function(e){x=e.s},function(e){w=e.w}],execute:function(){const{Countdown:f}=m,{Panel:g}=h,b=e=>{const o=e%60;return`${Math.floor(e/60)}:${o<10?"0":""}${o}`};e("default",x((e=>{const[m,x]=o.exports.useState(!0),[v,y]=o.exports.useState(0),[C,N]=o.exports.useState(0),[k,$]=o.exports.useState([]),[z,R]=o.exports.useState(""),[S,T]=o.exports.useState(!1),W=o.exports.useRef(w.getWords(e.$state.root.wordsMode,e.$state.root.customerWords)),j=o.exports.useRef(null),A=o.exports.useRef(null),E=o.exports.useRef(0),M=o.exports.useRef(!1),K=o.exports.useRef(0),P=o.exports.useRef(0),H=o.exports.useRef(!1),I=o.exports.useRef(53),O=o.exports.useRef(0),V=o.exports.useRef(parseInt(e.$state.root.countdownTime,10)),[Y,B]=o.exports.useState(b(V.current)),[D,F]=o.exports.useState(!0),[L,U]=o.exports.useState(!1),q=o.exports.useRef({wpm:0,correct:0,wrong:0,inputWordArr:[]}),G=e=>{$((o=>{const r=[...W.current];return e?(E.current=0,[{isCorrect:null,...r[E.current]}]):(E.current+=1,E.current>=r.length&&(E.current=0),o.concat({isCorrect:null,...r[E.current]}))}))},J=(e,o)=>{const r=e.join("");return r===o.text?(console.log("correct text: ",r,", ",o.text),!0):r===o.label&&(console.log("correct label: ",r,", ",o.label),!0)},Q=o.exports.useCallback((()=>{M.current=!1,P.current=0,H.current=!1,O.current=0,T(!1),R(""),N(0),W.current=w.shuffle(W.current),G(!0),setTimeout((()=>{A.current.focus(),q.current={wpm:0,correct:0,wrong:0,inputWordArr:[]}}),10)}),[]);return o.exports.useEffect((()=>{if(j){const e=j.current.lastElementChild;if(!e||!e.lastElementChild)return;const o=j.current.scrollTop;Array.from(e.children).forEach(((r,t)=>{I.current=r.offsetHeight;const n=r.offsetTop-e.offsetTop,c=I.current+o,s=c-5<n&&n<c+5;!M.current&&s&&(K.current=t,M.current=!0)})),e.lastElementChild.offsetTop-e.offsetTop-o<3*I.current+1&&G()}}),[k.length]),o.exports.useEffect((()=>{if(S)return;if(""===z)return void $((e=>{const o=[...e];return o[C]&&(o[C].isCorrect=null),o}));H.current=!0;const e=Array.from(z.trim());if(" "===z[z.length-1]||"　"===z[z.length-1]){if(R(""),0===e.length)return;$((o=>{let r=[...o];const t=r[C],n=J(e,t);return r[C].isCorrect=n,q.current.inputWordArr.push(Object.assign({input:e.join("")},r[C])),r})),N(C+1),C+1===K.current&&(P.current+=1,j.current.scrollTop=I.current*P.current,M.current=!1,G())}else $((o=>{const r=[...o],t=r[C],n=J(e,t);return r[C].isCorrect=!1!==n&&null,r}))}),[C,S,z]),o.exports.useEffect((()=>{W.current=w.getWords(e.$state.root.wordsMode,e.$state.root.customerWords),setTimeout((()=>{Q(),x(!1)}),1e3)}),[e.$state.root.wordsMode,e.$state.root.customerWords,Q]),r("div",{className:"home",children:r(t,{justify:"center",align:"middle",children:n(c,{flex:"450px",className:`home-scale-box-${e.$state.root.uiScale}`,children:[r("div",{className:"hide-control",children:n(s,{tabIndex:-1,type:"link",onClick:()=>F((e=>!e)),children:[D?"显示":"隐藏","假名"]})}),n("div",{className:"home-show-main",children:[S&&r("div",{className:"type-end"}),r(l,{spinning:m,delay:50,wrapperClassName:"loading-wrapper",children:r("div",{className:"home-show-main-window",ref:j,children:r(t,{gutter:12,children:k.map(((e,o)=>n(c,{className:`home-show-main-window-item ${!0===e.isCorrect?"correct":""} ${!1===e.isCorrect?"incorrect":""}`,children:[r("div",{className:"home-show-main-window--label "+(C===o?"acting":""),children:e.label}),r("div",{className:`home-show-main-window--text ${D?"hide":""}\n                                                ${C===o&&L?"show-text":""}\n                                                `,children:e.text})]},o)))})})})]}),n(t,{justify:"space-between",align:"middle",gutter:0,children:[r(c,{flex:"285px",children:r(i,{className:"home-input",ref:A,value:z,onChange:e=>{R(e.target.value)},onKeyUp:e=>{if(e.shiftKey&&32===e.keyCode){console.log("shift + space: ",e.keyCode,L);U(!L)}e.shiftKey&&13===e.keyCode&&(console.log("shift + enter: ",e.keyCode),alert(k[C].trans)),e.ctrlKey&&13===e.keyCode&&Q(),S||(O.current+=1,console.log("keystrokeCountRef.current: ",O.current))}})}),r(c,{flex:"90px",children:r(a,{content:n("div",{children:[r(d,{defaultValue:V.current,onChange:e=>{e&&/^\d+$/g.test(String(e))&&(V.current=Number(e),B(b(Number(e))))}}),r("span",{children:"秒"})]}),onVisibleChange:()=>e.$dispatch("setCountdownTime",String(V.current)),overlayClassName:"home-countdown-popover",placement:"bottom",title:"",trigger:"click",children:n("div",{className:"home-countdown",children:[r(f,{className:"home-countdown-main",value:v,format:"m:ss",onFinish:()=>{if(H.current){const e=q.current.inputWordArr,o=e.filter((e=>!0===e.isCorrect)).length;q.current={wpm:Math.round(o/(V.current/60)),correct:o,wrong:e.filter((e=>!1===e.isCorrect)).length,inputWordArr:e},T(!0),console.log(k)}}}),r("div",{className:"home-countdown-placeholder "+(H.current?"time-run":""),children:Y})]})})}),r(c,{flex:"50px",children:r(s,{className:"home-reload-btn",onClick:Q,type:"primary",icon:r(u,{})})})]}),r("div",{className:"home-type-result-container",children:S&&n(t,{className:"home-type-result",children:[r(c,{span:24,children:n("div",{className:"result-wpm",children:[q.current.wpm,"WPM"]})}),r(c,{span:12,children:r("div",{className:"result-title",children:"正确"})}),r(c,{span:12,children:r("div",{className:"result-numbers correct",children:q.current.correct})}),r(c,{span:12,children:r("div",{className:"result-title",children:"错误"})}),r(c,{span:12,children:r("div",{className:"result-numbers wrong",children:q.current.wrong})}),r(c,{span:12,children:r("div",{className:"result-title",children:"按键总数"})}),r(c,{span:12,children:r("div",{className:"result-numbers",children:O.current})}),r(c,{span:24,children:r(h,{ghost:!0,className:"type-resule-collapse",children:r(g,{header:"展开此次输入",children:q.current.inputWordArr.map(((e,o)=>n(p,{color:e.isCorrect?"success":"error",children:[r("div",{children:e.label}),r("div",{children:e.input})]},o)))},"1")})})]})})]})})})})))}}}))}();
